<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <!-- Search View for Calendar -->
    <record id="view_appointment_calendar_search" model="ir.ui.view">
        <field name="name">hms.appointment.calendar.search</field>
        <field name="model">hms.appointment</field>
        <field name="arch" type="xml">
            <search>
                <filter string="Today" name="today" domain="[('date', '&gt;=', context_today().strftime('%Y-%m-%d 00:00:00')), ('date', '&lt;=', context_today().strftime('%Y-%m-%d 23:59:59'))]"/>
                <filter string="This Week" name="this_week" domain="[('date', '&gt;=', context_today().strftime('%Y-%m-%d 00:00:00')), ('date', '&lt;=', (context_today() + datetime.timedelta(days=6)).strftime('%Y-%m-%d 23:59:59'))]"/>
                <filter string="This Month" name="this_month" domain="[('date', '&gt;=', context_today().strftime('%Y-%m-01 00:00:00')), ('date', '&lt;=', (context_today() + datetime.timedelta(days=31)).strftime('%Y-%m-%d 23:59:59'))]"/>
                <filter string="Physician" name="physician" context="{'group_by': 'physician_id'}">
                    <field name="physician_id"/>
                </filter>
                <filter string="Cabin" name="cabin" context="{'group_by': 'cabin_id'}">
                    <field name="cabin_id"/>
                </filter>
            </search>
        </field>
    </record>

    <!-- Day Calendar View -->
    <record id="view_appointment_day_calendar" model="ir.ui.view">
        <field name="name">hms.appointment.day.calendar</field>
        <field name="model">hms.appointment</field>
        <field name="arch" type="xml">
            <list js_class="day_calendar_view" create="true" edit="true">
                <field name="name"/>
                <field name="date"/>
                <field name="date_to"/>
                <field name="patient_id"/>
                <field name="physician_id"/>
                <field name="state"/>
                <field name="department_id"/>
                <field name="cabin_id"/>
                <field name="notes"/>
            </list>
        </field>
    </record>

    <!-- Week Calendar View -->
    <record id="view_appointment_week_calendar" model="ir.ui.view">
        <field name="name">hms.appointment.week.calendar</field>
        <field name="model">hms.appointment</field>
        <field name="arch" type="xml">
            <list js_class="week_calendar_view" create="true" edit="true">
                <field name="name"/>
                <field name="date"/>
                <field name="date_to"/>
                <field name="patient_id"/>
                <field name="physician_id"/>
                <field name="state"/>
                <field name="department_id"/>
                <field name="cabin_id"/>
                <field name="notes"/>
            </list>
        </field>
    </record>

    <!-- Month Calendar View -->
    <record id="view_appointment_month_calendar" model="ir.ui.view">
        <field name="name">hms.appointment.month.calendar</field>
        <field name="model">hms.appointment</field>
        <field name="arch" type="xml">
            <list js_class="month_calendar_view" create="true" edit="true">
                <field name="name"/>
                <field name="date"/>
                <field name="date_to"/>
                <field name="patient_id"/>
                <field name="physician_id"/>
                <field name="state"/>
                <field name="department_id"/>
                <field name="cabin_id"/>
                <field name="notes"/>
            </list>
        </field>
    </record>

    <!-- Consultation Room (Cabin) Day View -->
    <record id="view_appointment_cabin_day_calendar" model="ir.ui.view">
        <field name="name">hms.appointment.cabin.day.calendar</field>
        <field name="model">hms.appointment</field>
        <field name="arch" type="xml">
            <list js_class="cabin_day_calendar_view" create="true" edit="true">
                <field name="name"/>
                <field name="date"/>
                <field name="date_to"/>
                <field name="patient_id"/>
                <field name="physician_id"/>
                <field name="state"/>
                <field name="department_id"/>
                <field name="cabin_id"/>
                <field name="notes"/>
            </list>
        </field>
    </record>

    <!-- Cabin Week Calendar View -->
    <record id="view_appointment_cabin_week_calendar" model="ir.ui.view">
        <field name="name">hms.appointment.cabin.week.calendar</field>
        <field name="model">hms.appointment</field>
        <field name="arch" type="xml">
            <list js_class="cabin_week_calendar_view" create="true" edit="true">
                <field name="name"/>
                <field name="date"/>
                <field name="date_to"/>
                <field name="patient_id"/>
                <field name="physician_id"/>
                <field name="state"/>
                <field name="department_id"/>
                <field name="cabin_id"/>
                <field name="notes"/>
            </list>
        </field>
    </record>

    <!-- Cabin Month Calendar View -->
    <record id="view_appointment_cabin_month_calendar" model="ir.ui.view">
        <field name="name">hms.appointment.cabin.month.calendar</field>
        <field name="model">hms.appointment</field>
        <field name="arch" type="xml">
            <list js_class="cabin_month_calendar_view" create="true" edit="true">
                <field name="name"/>
                <field name="date"/>
                <field name="date_to"/>
                <field name="patient_id"/>
                <field name="physician_id"/>
                <field name="state"/>
                <field name="department_id"/>
                <field name="cabin_id"/>
                <field name="notes"/>
            </list>
        </field>
    </record>


    <!-- Calendar Actions -->
    <record id="action_appointment_calendar_day" model="ir.actions.act_window">
        <field name="name">Appointments - Day Calendar</field>
        <field name="res_model">hms.appointment</field>
        <field name="view_mode">list</field>
        <field name="view_id" ref="view_appointment_day_calendar"/>
        <field name="search_view_id" ref="view_appointment_calendar_search"/>
        <field name="domain">[]</field>
        <field name="context">{'search_default_today': 1}</field>
    </record>

    <record id="action_appointment_calendar_week" model="ir.actions.act_window">
        <field name="name">Appointments - Week Calendar</field>
        <field name="res_model">hms.appointment</field>
        <field name="view_mode">list</field>
        <field name="view_id" ref="view_appointment_week_calendar"/>
        <field name="search_view_id" ref="view_appointment_calendar_search"/>
        <field name="domain">[]</field>
        <field name="context">{'search_default_this_week': 1}</field>
    </record>

    <!-- V2: New Month Calendar Action -->
    <record id="action_appointment_calendar_month" model="ir.actions.act_window">
        <field name="name">Appointments - Month Calendar</field>
        <field name="res_model">hms.appointment</field>
        <field name="view_mode">list</field>
        <field name="view_id" ref="view_appointment_month_calendar"/>
        <field name="search_view_id" ref="view_appointment_calendar_search"/>
        <field name="domain">[]</field>
        <field name="context">{'search_default_this_month': 1}</field>
    </record>

    <!-- Consultation Room (Cabin) Day Action -->
    <record id="action_appointment_calendar_cabin_day" model="ir.actions.act_window">
        <field name="name">Consultation Room (Cabin) - Day Calendar</field>
        <field name="res_model">hms.appointment</field>
        <field name="view_mode">list</field>
        <field name="view_id" ref="view_appointment_cabin_day_calendar"/>
        <field name="search_view_id" ref="view_appointment_calendar_search"/>
        <field name="domain">[]</field>
        <field name="context">{'search_default_today': 1}</field>
    </record>

    <!-- New Cabin Week Calendar Action -->
    <record id="action_appointment_calendar_cabin_week" model="ir.actions.act_window">
        <field name="name">Consultation Room (Cabin) - Week Calendar</field>
        <field name="res_model">hms.appointment</field>
        <field name="view_mode">list</field>
        <field name="view_id" ref="view_appointment_cabin_week_calendar"/>
        <field name="search_view_id" ref="view_appointment_calendar_search"/>
        <field name="domain">[]</field>
        <field name="context">{'search_default_this_week': 1}</field>
    </record>

    <!-- New Cabin Month Calendar Action -->
    <record id="action_appointment_calendar_cabin_month" model="ir.actions.act_window">
        <field name="name">Consultation Room (Cabin) - Month Calendar</field>
        <field name="res_model">hms.appointment</field>
        <field name="view_mode">list</field>
        <field name="view_id" ref="view_appointment_cabin_month_calendar"/>
        <field name="search_view_id" ref="view_appointment_calendar_search"/>
        <field name="domain">[]</field>
        <field name="context">{'search_default_this_month': 1}</field>
    </record>

    <!-- Menu Structure -->
    <menuitem id="menu_appointment_calendar_views"
              name="Calendar Views"
              parent="acs_hms.action_main_menu_appointmnet_opd"
              sequence="65"/>

    <menuitem id="menu_appointment_day_view"
              name="Day View"
              parent="menu_appointment_calendar_views"
              action="action_appointment_calendar_day"
              sequence="10"/>

    <menuitem id="menu_appointment_week_view"
              name="Week View"
              parent="menu_appointment_calendar_views"
              action="action_appointment_calendar_week"
              sequence="20"/>

    <!-- V2: New Month View Menu -->
    <menuitem id="menu_appointment_month_view"
              name="Month View"
              parent="menu_appointment_calendar_views"
              action="action_appointment_calendar_month"
              sequence="25"/>

    <!-- V1: New Consultation Room (Cabin) Menu -->
    <menuitem id="menu_appointment_consultation_room_view"
              name="Clinic Day View"
              parent="menu_appointment_calendar_views"
              action="action_appointment_calendar_cabin_day"
              sequence="30"/>

        <!-- Menu Structure Updates -->
    <menuitem id="menu_appointment_cabin_week_view"
              name="Clinic Week View"
              parent="menu_appointment_calendar_views"
              action="action_appointment_calendar_cabin_week"
              sequence="35"/>

    <menuitem id="menu_appointment_cabin_month_view"
              name="Clinic Month View"
              parent="menu_appointment_calendar_views"
              action="action_appointment_calendar_cabin_month"
              sequence="40"/>

    <!-- <menuitem id="menu_calendar_time_config"
          name="Calendar Time Configuration"
          parent="acs_hms.menu_appointment_cofig"
          action="action_calendar_time_config"
          sequence="100"/> -->
</odoo>
